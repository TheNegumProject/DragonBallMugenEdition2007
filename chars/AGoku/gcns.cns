; COMMON CNS STUFF - Overwritten
; For "Another Goku" by HyperionX & Iron Mask
; Stuff~~ Version 1.0

; Common state file
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 5]
type = ChangeState
trigger1 = time = 0
trigger1 = Pos Y < 0
value = 1510

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 0, 5]
type = ChangeState
trigger1 = time = 0
trigger1 = Pos Y < 0
value = 1510

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 100, Explod]
type = Explod; special effect..like a blast from his hand or something
trigger1 = time = 0; whenever it should trigger
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; just an ID
pos = 0,0; where it should be relative to the postype
postype = p1; 
facing = 1
vel = 0,0 ; not moving
sprpriority	= 3

[State 100: ScreenBound]
type = ScreenBound
trigger1 = (BackEdgeBodyDist <= -5)
value = 0
movecamera = 0,0

[State 100:	CtrlSet]
type = CtrlSet
trigger1 = 1
value = (IfElse(BackEdgeBodyDist > -5,1,0))

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100: ChangeState]
type = ChangeState
trigger1 = (Command != "holdfwd") && (AnimElem = 2, > 5) && (BackEdgeBodyDist > -1)
value = 101

;Fly Forward/Dash - Stop Animation Extra Add
[Statedef 101]
type  = S
movetype = I
physics	= N
anim = 107
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 1

[State 101:	ScreenBound]
type = ScreenBound
trigger1 = (BackEdgeBodyDist <= -5)
value = 0
movecamera	= 0,0

[State 101:	VelSet]
type = VelSet
trigger1 = 1
x = 1
y = 0

[State 101: MakeDust]
type = MakeDust
trigger1 = 1
pos = -5, 0
spacing = 4

[State 101: ChangeState]
type = ChangeState
trigger1 = (!AnimTime)
value = 0
ctrl = 1

; RUN_BACK
[Statedef 105]
type    = S
physics = S
sprpriority = 1
anim = 105

[State 100, Explod]
type = Explod; 
trigger1 = time = 0;
anim = 7011; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; 
pos = 0,0;
postype = p1; 
facing = 1
vel = 0,0 ;
sprpriority	= 3

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.back.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdback"
value = 106

[State fly, Changestate]
type = null
trigger1 = Pos Y < 0
value = 1500

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 130

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 153

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 155, 8]
type = ChangeState
trigger1 = sysvar(0)
value = 130

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Player constants.
; Format (case insensitive):
; [Groupname]        
; Constant Name =  Value  

[Data]
life = 1000  ; Amount of life to start with
power = 3000  ; Maximum power level (for supers)
attack = 80  ; 100% attack power (more is stronger)
defence = 100  ; 100% defensive power (more is stronger)
fall.defence_up = 50  ; Def goes up by 50% everytime player is hit on ground
liedown.time = 60  ; Time player takes before getting up from HIT_LIEDOWN
airjuggle = 15  ; Can do 15 points of juggling
sparkno = 2  ; Default spark number
guard.sparkno = 40  ; Default guard spark number
KO.echo = 0  ; Set to 1 to enable echo on KO
volume = 0  ; Volume offset (negative for softer)

; Variables with this index and above will not have their values
; reset to 0 between rounds or matches. There are 60 int variables,
; indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
; If omitted, then it defaults to 60 and 40 for integer and float
; variables repectively, meaning that none are persistent, i.e. all
; are reset. If you want your variables to persist between matches,
; you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1  ; Horizontal scaling factor.
yscale = 1  ; Vertical scaling factor.
ground.back = 15  ; Player width (back, ground)
ground.front = 15  ; Player width (front, ground)
air.back = 12  ; Player width (back, air)
air.front = 12  ; Player width (front, air)
height = 60  ; Height of player (for opponent to jump over)
attack.dist = 160  ; Default attack distance
proj.attack.dist = 90  ; Default attack distance for projectiles
proj.doscale = 0  ; Set to 1 to scale projectiles too
head.pos = -5, -90  ; Approximate position of head
mid.pos = -5, -60  ; Approximate position of midsection
shadowoffset = 0  ; Number of pixels to vertically offset the shadow
draw.offset = 0,0  ; Player drawing offset in pixels (x, y)


[Velocity]
walk.fwd = 2.3  ; Walk forward
walk.back = -2.2  ; Walk backward
run.fwd  = 4.6, 0  ; Run forward (x, y)  - if y<0, player will hop
run.back = -4.5,-3.8  ; Run backward (x, y) - if y=0, player will run
jump.neu = 0,-8.1  ; Neutral jumping velocity (x, y)
jump.back = -2.55  ; Jump back Speed (x, y)
jump.fwd = 2.5  ; Jump forward Speed (x, y)
runjump.back = -2.55,-8.1  ; Running jump speeds (opt)
runjump.fwd = 4,-8.1
airjump.neu = 0,-8.1
airjump.back = -2.55  ; Air jump speeds (opt)
airjump.fwd = 2.5

[Movement]

airjump.num = 1  ; Number of air jumps allowed (opt)
airjump.height = 35  ; Minimum distance from ground before you can air jump (opt)
yaccel = .43  ; Vertical acceleration
stand.friction = .85  ; Friction coefficient when standing
crouch.friction = .82  ; Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose ( by Time over )
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Intro pose
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0,0

[State 191, 1]   ; Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2]   ; Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]   ; Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




; Standing Normal Attacks
; Recommended State Numbers = 200 - 399
;---------------------------------------------------------------------------
; STAND_A
[Statedef 200]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 200                     ; Change animation (Def: no change)
poweradd = 0               ; Power to add (Def: 0)

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S1, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-60
hitsound   = S0, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_B
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0,0
anim = 205

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S1, 5

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-55
hitsound   = S0, 2
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_C
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0,0
anim = 210

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = null; PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-70
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_D
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0,0
anim = 230

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S1, 5

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-70
hitsound   = S0, 4
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_D
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0,0
anim = 235

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S1, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-40
hitsound   = S0, 5
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_E
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0,0
anim = 240

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = null; PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7013
sparkxy = -10,-70
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



; Crouching Normal Attacks
; Recommended State Numbers = 400 - 599
;---------------------------------------------------------------------------
;CROUCH_A
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 0
ctrl = 0
anim = 400

[State 410, 2]
type = PlaySnd
trigger1 = animelem = 2
value = S1,5

[State 410, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 62, 10
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = S7643
guard.sparkno = S5339
sparkxy = 0,0
hitsound   = S1,0
guardsound = S3,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 400, 3]
type = CtrlSet
trigger1 = Time = 4
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
;CROUCH_B
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 0
ctrl = 0
anim = 410

[State 410, 2]
type = PlaySnd
trigger1 = animelem = 2
value = S1,5

[State 410, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 62, 10
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = S1
guard.sparkno = S2
sparkxy = 0,0
hitsound   = S1,0
guardsound = S3,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Aerial Basic Attacks
; Recommended State Numbers = 600 - 799
;---------------------------------------------------------------------------
;JUMP_A
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim = 600

[State 610, 2]
type = PlaySnd
trigger1 = animelem = 2
value = S0, 3

[State 600, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 12, 5
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = S7005
guard.sparkno = S7013
sparkxy = 0,-11
hitsound   = S0,2
guardsound = S3,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;---------------------------------------------------------------------------
;JUMP_B
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 0
ctrl = 0
anim = 610

[State 610, 2]
type = PlaySnd
trigger1 = animelem = 2
value = S0, 3

[State 600, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 12, 5
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = S7005
guard.sparkno = S7013
sparkxy = 0,-11
hitsound   = S0,2
guardsound = S3,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 610, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
; Throws and Other Basic Attacks
; Recommended State Numbers = 800 - 999
;---------------------------------------------------------------------------




; Special Attacks
; Recommended State Numbers = 1000 - 2999
;---------------------------------------------------------------------------




; Super Attacks (DMs)
; Recommended State Numbers = 3000 - 3999
;---------------------------------------------------------------------------
;Air Dash

[Statedef 1001]
type    = S
physics = S
anim = 100

[State 105, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 60
length = 15
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = 5
y = 0

[State 100,assert]
type = AssertSpecial
trigger1 = command = "holdfwd"
flag = nowalk

[State 100, 2]
type = ChangeState
trigger1 = command != "holdfwd"
value = 50

;Air Dash Back
[Statedef 1051]
type    = A
physics = N
anim = 105

[State 105, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 60
length = 15
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 105, 1]
type = PlaySnd
trigger1 = time = 0
value = 21,6

[State 100, 1]
type = VelSet
trigger1 = 1
x = -5
y = 0

[State 100,assert]
type = AssertSpecial
trigger1 = command = "holdback"
flag = nowalk

[State 105, 2]
type = ChangeState
trigger1 = !command = "holdback"
value = 50

; Charge
[Statedef 730]
type    = S
movetype= I
physics = S
juggle  = 9
velset = 0,0
ctrl = 0
poweradd = 0
facep2 = 1
anim = 730

[State 730, Aura]
type = Explod
trigger1 = animelem = 2
anim = 731
ID = 731
sprpriority = -1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1

[State 730, RemoveAura]
type = RemoveExplod
ID = 731
trigger1 = (command != "charge 1") || (command != "charge") || (life = 0) || stateno != 730

[State 730, 1]
type = Poweradd
trigger1 = Time >= 0
value = 5

[State 730, 2]
type = playsnd
triggerall = var(1) = 2
trigger1 = animelem = 2
value = S2,5
channel = 8
volume = 255

[State 730, 2]
type = playsnd
triggerall = var(1) != 2
trigger1 = animelem = 2
value = S2,5
channel = 8
volume = 255

[State 730, 2]
type = playsnd
triggerall = var(1) != 2
trigger1 = animelem = 2
trigger2 = timemod = 25,0
value = S2,5
channel = 8
volume = 255

[State 730, 3]
type = ChangeState
trigger1 = command != "charge 1"
value = 0
ctrl = 1

[State 730, 4]
type = ChangeState
trigger1 = command != "charge"
value = 0
ctrl = 1

;teleport 
[Statedef 8642]
type    = S
movetype= I
physics = S
ctrl = 0

[State 27001, 8]
type = PlaySnd
trigger1 = Time = 1
value = S2, 28

[State 2005, 1]
type = changeanim
trigger1 = Time = 0 && Anim != 7001
value = 7001

[State 27001, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 27001, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
trans = add
palfx = 200,200,200

[State 27001, TeleportFwd]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
x = 400
y = 0

[State 27001, TeleportFwdUp]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdup"
trigger1 = command = "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holddown"
x = 400
y = -150

[State 27001, TeleportFwdDown]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdfwd"
trigger1 = command = "holddown"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
x = 400
;y = 150

[State 27001, TeleportBack]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
x = -400
y = 0

[State 27001, TeleportBackDown]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdback"
trigger1 = command = "holddown"
trigger1 = command != "holdup"
trigger1 = command != "holdfwd"
x = -400
;y = 150

[State 27001, TeleportBackUp]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdback"
trigger1 = command = "holdup"
trigger1 = command != "holdfwd"
trigger1 = command != "holddown"
x = -400
y = -150

[State 27001, TeleportDown]
type = ChangeState
triggerall = AnimElem = 2
trigger1 = Pos Y < 0
trigger1 = command = "holddown"
trigger1 = command != "holdup"
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
value = 2005

[State 27001, TeleportUp]
type = PosAdd
triggerall = AnimElem = 2
trigger1 = command = "holdup"
trigger1 = command != "holddown"
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0
y = -150

[State 27001, Turn]
type = Turn
trigger1 = P2Dist X < 0

[State 27001, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 7003
ctrl = 1

[State 27001, 7]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,1

;Appear Down
[Statedef 2005]
type = S
physics = S
ctrl = 0
velset = 0,0,0
anim = 7003

[State 2005, 3]
type = posset
trigger1 = time = 0
y = 0

[State 2005, 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;teleport  - Reappear Image
[Statedef 7003]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
facep2 = 1
sprpriority = 5
anim = 7003

[State 27003, 0]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
trans = add
palfx = 200,200,200

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = pos Y < 0
value = 1510

[State 27003, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Evade Forward
[Statedef 3100]
type = S
movetype = I
physics = N
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist = 0
sprpriority	= 2
anim = 3100

[State 7020: SprPriority]
type = SprPriority
trigger1 = (AnimElem = 2, > 0)
value = -2

[State 7020: PlayerPush]
type = PlayerPush
trigger1 = (AnimElem = 2, > 0)
value = 0

[State 7020: HitBy]
type = HitBy
trigger1 = (Time = 0)
value = SCA, AT
time = 20

[State 7020: MakeDust]
type = MakeDust
trigger1 = (AnimElem = 2, > 0)
pos = -5, 0
spacing = 4

[State 7020: VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 9

[State 7020: PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1, 12
channel = 0

[State 1050, 2]
type=AfterImage
trigger1= AnimElem = 1 
time=4
trans = add
PalContrast =  255, 200, 255
PalBright = 0,0,0

[State 7020: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Evade Backward
[Statedef 3101]
type = S
movetype = I
physics	= N
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist = 0
sprpriority	= 2
anim = 3101

[State 7030: SprPriority]
type = SprPriority
trigger1 = (AnimElem = 2, > 0)
value = -2

[State 7030: PlayerPush]
type = PlayerPush
trigger1 = (AnimElem = 2, > 0)
value = 0

[State 7030: HitBy]
type = HitBy
trigger1 = Time = 0
value = SCA, AT
time = 20

[State 7030: VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -10

[State 7030: PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1, 12
channel	= 0

[State 1050, 2]
type=AfterImage
trigger1= AnimElem = 1 
time=4
trans = add
PalContrast =  255, 200, 255
PalBright = 0,0,0

[State 7030: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Quick Teleport [used for counters] 
[Statedef 8648]
type    = S
movetype= A
physics = S
poweradd= -10
juggle  = 4
ctrl = 0
velset = 0,0
anim = 2054

[State 4100, 0]
type = PlaySnd
trigger1 = Time = 0
value = S2, 27

[State 4100, 1]
type = PosAdd
trigger1 = Time = 4
x = P2Dist X+30

[State 4100, 5]
type = turn
trigger1 = P2Dist X < 0
trigger1 = Time = 4

[State 1410, 5]
type = ChangeState
trigger1 = Time = 8
value = 0
ctrl = 1

[State 201, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Pos Y < 0
value = 1510

;Air Dash (Frente)
[Statedef 1001]
type    = S
physics = S
anim = 100

[State 105, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 60
length = 15
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = 5
y = 0

[State 100,assert]
type = AssertSpecial
trigger1 = command = "holdfwd"
flag = nowalk

[State 100, 2]
type = ChangeState
trigger1 = command != "holdfwd"
value = 50

;Air Dash Back
[Statedef 1051]
type    = A
physics = N
anim = 105

[State 105, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 60
length = 15
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 105, 1]
type = PlaySnd
trigger1 = time = 0
value = 21,6

[State 100, 1]
type = VelSet
trigger1 = 1
x = -5
y = 0

[State 100,assert]
type = AssertSpecial
trigger1 = command = "holdback"
flag = nowalk

[State 105, 2]
type = ChangeState
trigger1 = !command = "holdback"
value = 50

;---------------------------------------------------------------------------
;Bukuu Jutsu (Flying Start)
[Statedef 1500]
type = S
movetype = I
physics = A
ctrl = 0

[State 1500, VelAddY]
type = VelAdd
trigger1 = Time = 0
y = -10

[State 1500, ChangeAnim1]
type = ChangeAnim
triggerall = var(7) = 0
trigger1 = Time = 0
value = 1510

[State 1500, ChangeAnim1]
type = ChangeAnim
triggerall = var(7) = 4
trigger1 = Time = 0
value = 1510

[State 1500, ChangeAnim1]
type = ChangeAnim
triggerall = var(7) = 1
trigger1 = Time = 0
value = 11510

[State 1500, ChangeAnim2]
type = ChangeAnim
triggerall = var(7) = 2
trigger1 = Time = 0
value = 21510

[State 1500, ChangeAnim2]
type = ChangeAnim
triggerall = var(7) = 3
trigger1 = Time = 0
value = 31510

[State 1500, AfterImage]
type = AfterImage
Trigger1 = Time = 1
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 10

[State 1500, Fly]
type = ChangeState
Trigger1 = AnimTime = 0
value = 1510
ctrl = 1

;---------------------------------------------------------------------------
;Bukuu Jutsu
[Statedef 1510]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 1510, VarSet]
type = VarSet
Trigger1 = Time = 0
var(3) = 1

[State 1510, Guard]
type = ChangeState
triggerall = P2MoveType = A
triggerall = P2BodyDist X < 60
trigger1 = Command = "holdback"
trigger2 = Command = "BB"
value = 130

;~
[State 1510, Stop1]
type = VelSet
Trigger1 = Command != "holdfwd"
Trigger1 = Command != "holdback"
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = var(2) = 0
Trigger2 = Pos Y < -405
x = 0
y = 0

[State 1510, Stop2]
type = ChangeAnim
trigger1 = var(7) = 0
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = Anim != 1510
value = 1510

[State 1510, Stop2]
type = ChangeAnim
trigger1 = var(7) = 4
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = Anim != 1510
value = 1510

[State 1510, Stop2]
type = ChangeAnim
trigger1 = var(7) = 1
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = Anim != 11510
value = 11510


[State 1510, Stop2]
type = ChangeAnim
trigger1 = var(7) = 2
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = Anim != 21510
value = 21510

[State 1510, Stop2]
type = ChangeAnim
trigger1 = var(7) = 3
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = Anim != 21510
value = 31510

[State 1510,fuwavar(1)]
type = VarSet
Trigger1 = Command != "holdfwd"
Trigger1 = Command != "holdback"
Trigger1 = Command != "holdup"
Trigger1 = Command != "holddown"
Trigger1 = var(2) != 2
Trigger2 = var(2) = 2
Trigger2 = Vel Y >= 2.4
v = 2
value = 1

[State 1510,fuwavar(2)]
type = VarSet
Triggerall = var(2) = 1
Trigger1 = Vel Y <= -2.4
Trigger2 = P2BodyDist Y > 250
Trigger2 = Vel Y < 0
v = 2
value = 2

[State 1500: Up];
Type        = VelAdd;
Trigger1 = var(2) = 1
Y           = -.3;
;
[State 1500: Down]
Type        = VelAdd
Trigger1 = var(2) = 2
Y           = .2

[State 1510,fuwaEnd]
type = VelSet
Triggerall = var(2) != 0
Trigger1 = Command = "holdfwd"
Trigger2 = Command = "holdback"
Trigger3 = Command = "holdup"
Trigger4 = Command = "holddown"
y = 0

[State 1510,fuwaEndVar]
type = VarSet
Trigger1 = Command = "holdfwd"
Trigger2 = Command = "holdback"
Trigger3 = Command = "holdup"
Trigger4 = Command = "holddown"
v = 2
value = 0


[State 1510, UpBorder1]
type = PosSet
Trigger1 = Pos Y < -250
y = -250

[State 1510, UpBorder2a]
type = PosAdd
Trigger1 = P2BodyDist Y > 250
Trigger1 = Vel Y < 0
y = 1

[State 1510, UpBorder2b]
type = VelSet
Trigger1 = P2BodyDist Y > 250
Trigger1 = Vel Y < 0
y = 0

[State 1510, Runeffect]
type = AfterImage
Trigger1 = Command = "FF"
Trigger1 = Vel X < 8.6
Trigger2 = Command = "BB"
Trigger2 = Vel X > -7
Trigger3 = Command = "DD"
Trigger3 = Vel Y < 8.6
Trigger4 = Command = "UU"
Trigger4 = Vel Y > -7
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 10

[State 1510, RunFwd]
type = VelSet
Trigger1 = Command = "FF"
Trigger1 = Vel X < 8.6
x = 8.6

[State 1510, RunBack]
type = VelSet
Trigger1 = Command = "BB"
Trigger1 = Vel X > -7
x = -7

[State 1510, RunDown]
type = VelSet
Trigger1 = Command = "DD"
Trigger1 = Vel Y < 8.6
y = 8.6

[State 1510, RunUp]
type = VelSet
Trigger1 = Command = "UU"
Trigger1 = Vel Y > -7
y = -7

[State 1510, GoDown1]
type = VelAdd
Trigger1 = Command = "holddown"
y = 0.4

[State 1510,GoDown2]
type = VelSet
Trigger1 = Command = "holddown"
Trigger1 = Vel Y < 0 
y = 0

;
[State 1510, GoUp1]
type = VelAdd
Trigger1 = Command = "holdup"
y = -0.3

[State 1510,GoUp2]
type = VelSet
Trigger1 = Command = "holdup"
Trigger1 = Vel Y > 0 
y = 0

[State 1510, GoUpAnim]
type = ChangeAnim
trigger1 = var(7) = 0
Trigger1 = Anim != 1513
Trigger1 = Command = "holdup"
value = 1513

[State 1510, GoUpAnim]
type = ChangeAnim
trigger1 = var(7) = 4
Trigger1 = Anim != 1513
Trigger1 = Command = "holdup"
value = 1513

[State 1510, GoUpAnim]
type = ChangeAnim
trigger1 = var(7) = 1
Trigger1 = Anim != 11513
Trigger1 = Command = "holdup"
value = 11513


[State 1510, GoUpAnim]
type = ChangeAnim
trigger1 = var(7) = 2
Trigger1 = Anim != 21513
Trigger1 = Command = "holdup"
value = 21513


[State 1510, GoUpAnim]
type = ChangeAnim
trigger1 = var(7) = 3
Trigger1 = Anim != 31513
Trigger1 = Command = "holdup"
value = 31513

[State 1510, GoBack1]
type = VelAdd
Trigger1 = Command = "holdback"
x = -0.3

[State 1510,GoBack2]
type = VelSet
Trigger1 = Command = "holdback"
Trigger1 = Vel X > 0 
x = 0

[State 1510, GoBackAnim]
type = ChangeAnim
triggerall = var(7) = 0
Triggerall = Anim != 1512
Trigger1 = Command = "holdback"
Trigger2 = Command = "holddown"
value = 1512

[State 1510, GoBackAnim]
type = ChangeAnim
triggerall = var(7) = 4
Triggerall = Anim != 1512
Trigger1 = Command = "holdback"
Trigger2 = Command = "holddown"
value = 1512

[State 1510, GoBackAnim]
type = ChangeAnim
triggerall = var(7) = 1
Triggerall = Anim != 11512
Trigger1 = Command = "holdback"
Trigger2 = Command = "holddown"
value = 11512


[State 1510, GoBackAnim]
type = ChangeAnim
triggerall = var(7) = 2
Triggerall = Anim != 21512
Trigger1 = Command = "holdback"
Trigger2 = Command = "holddown"
value = 21512

[State 1510, GoBackAnim]
type = ChangeAnim
triggerall = var(7) = 3
Triggerall = Anim != 21512
Trigger1 = Command = "holdback"
Trigger2 = Command = "holddown"
value = 31512

[State 1510, GoFwd1]
type = VelAdd
Trigger1 = Command = "holdfwd"
x = 0.4

[State 1510,GoFwd2]
type = VelSet
Trigger1 = Command = "holdfwd"
Trigger1 = Vel X < 0 
x = 0

[State 1510, GoFwdAnim]
type = ChangeAnim
trigger1 = var(7) = 0
Trigger1 = Anim != 1511
Trigger1 = Command = "holdfwd"
value = 1511

[State 1510, GoFwdAnim]
type = ChangeAnim
trigger1 = var(7) = 4
Trigger1 = Anim != 1511
Trigger1 = Command = "holdfwd"
value = 1511

[State 1510, GoFwdAnim]
type = ChangeAnim
trigger1 = var(7) = 1
Trigger1 = Anim != 11511
Trigger1 = Command = "holdfwd"
value = 11511

[State 1510, GoFwdAnim]
type = ChangeAnim
trigger1 = var(7) = 2 
Trigger1 = Anim != 21511
Trigger1 = Command = "holdfwd"
value = 21511

[State 1510, GoFwdAnim]
type = ChangeAnim
trigger1 = var(7) = 3 
Trigger1 = Anim != 31511
Trigger1 = Command = "holdfwd"
value = 31511

[State 1510, Turn]
type = Turn
Trigger1 = P2Dist X < 0

[State 1500: MoveUp]
type = VelSet
trigger1 = (Pos Y > -20)
y = 0
;ignorehitpause = 0
;persistent = 1

[State 1500: Border]
type = PosSet
trigger1 = (Pos Y > -20)
;x = 
y = -20
;ignorehitpause = 0
;persistent = 1

[State 1500: Land]
Type        = ChangeState
TriggerAll  = (Time >= 20)
Trigger1    = Command = "Fly"
Value       = 50
Ctrl        = 1

[State 1500: Win-Lose]
Type        = ChangeState
Trigger1    = (Win) || (Lose)
Value       = 50
Ctrl        = 0

; Fireball Attacks
; Recommended State Numbers = 4000 - 4999 [Shut up ...]
; ---------------------------------------------------------------------------
;Fireball
[Statedef 1320]
type = S
movetype = A
physics =S
velset = 0,0,0
juggle = 4
ctrl = 0
anim = 2778
poweradd = -50

;Blast Wave Effect
[State 4002, balls]
Type = null
trigger1 = AnimElem = 2
Anim = 2781
pos = 0,0
postype = p1
removetime = 11
ownpal = 1
supermovetime = -1
ontop = 1

[State 5235, 1]
type= PlaySnd
trigger1 = AnimElem = 2
value= S1, 14

[State 1850: Helper]
type = Helper
trigger1 = animelem = 2
helpertype = Normal
pos	= 0,0
postype	= p1
facing = 1
stateno	= 1334
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

[State 5235, 3]
type =  ChangeState
trigger1 = Time = 15
trigger1 = Pos Y < 0
value = 1500

[State 5235, 4]
type =  ChangeState
trigger1 = AnimTime = 0
value =  0
ctrl= 1

;Fireball
[Statedef 1334]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 2780

[State 0, ]
type = VelAdd
trigger1 = time >= 0
x = 3

[State 11251, HitDef]
type = HitDef
trigger1 = time >= 0
attr = S,SA
hitflag = MAF
guardflag = MA 
animtype = Light
priority = 99999999,Hit
hitsound = S2, 6
guardsound = S2, 6
sparkno = S7012
guard.sparkno = S7012
sparkxy = 19,-55
damage = 10,5
pausetime = 0,10
ground.type = High
ground.velocity = -3,0
air.velocity = -3,0
envshake.time = 10
envshake.freq = 60
envshake.ampl = -4

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = movecontact = 1

; Hard Kick
[Statedef 250]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 250                     ; Change animation (Def: no change)
poweradd = -100              ; Power to add (Def: 0)

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 3
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 1

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 3
value = S1, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 80, 30
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7013
sparkxy = -10,-40
hitsound   = S0, 7
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; 3 hit Kick Combo 
[Statedef 251]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 251                     ; Change animation (Def: no change)
poweradd = -150             ; Power to add (Def: 0)

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 6
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 7
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 10
x = 4

[State 610, 4]
type = Velset
trigger1 = AnimElem = 11
x = 4

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S1, 4

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 6
value = S1, 5

[State 210, 1] ; Remove null and uncomment if you want to play a sound
type = PlaySnd
trigger1 = AnimElem = 10
value = S0, 3

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 60, 20
guardflag = MA
pausetime = 11,11
sparkno = S7004
guard.sparkno = S7014
sparkxy = -10,-70
hitsound   = S1, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Medium
damage    = 60, 20
guardflag = MA
pausetime = 11,11
sparkno = S7005
guard.sparkno = S7014
sparkxy = -10,-40
hitsound   = S1, 2
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 11
attr = S, NA
animtype  = Medium
damage    = 60, 20
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7014
sparkxy = -10,-70
hitsound   = S0, 5
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;KameHameHa ; Charging Up
[Statedef 6000]
type = S
movetype = A
physics = S
anim = 510
;velset	= 0,0
ctrl = 0
poweradd = 0
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

;Kamehameha 
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 50
value = S4, 0
channel = 1

;EEEWWWW 
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 30
value = S1, 13
channel = 2

;EEEWWWW zzzZZZ
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 60
value = S1, 15
channel = 3
loop = 1

;EEEWWWW ZZZzzz
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 75
value = S1, 16
channel = 4
loop = 1

;Aura Sound
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 2
value = S2, 5
channel = 5
loop = 1

;EEEWWWW
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 75
value = S1, 16
channel = 4
loop = 1

[State 1850: Helper]
type = Helper
trigger1 = time = 40
helpertype = Normal
pos	= 97,121
postype	= p1
facing = 1
stateno	= 196
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

;Aura Effect
[State 730, Aura]
type = Explod
trigger1 = animelem = 2
anim = 731
ID = 731
sprpriority = 3
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1

;Aura Gather
[State 100, Explod]
type = Explod
trigger1 = time = 30; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Ball of Energy
[State 100, Explod]
type = Explod
trigger1 = time = 80; whenever it should trigger
anim = 7017; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 2
sprpriority = 2
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1
pos = 0,0

[State 200: EnvShake]
type = EnvShake
trigger1 = (AnimElem = 2, > 0) && ((GameTime%10) = 0)
time = 10
freq = 80
ampl = -4
phase = 90

[State 200, 7]
type = ChangeState
triggerall = (AnimElem = 2, > 180)
trigger1 = command = "z"
value = IfElse(Command = "holdup",6002,6001)

;KameHameHa ; Charging Up ; Ball Release [Fireball Version]
[Statedef 6001]
type = S
movetype = A
physics = S
anim = 511
;velset	= 0,0
ctrl = 0
poweradd = -1500
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

;BALL itself
[State 1850: Helper]
type = Helper
trigger1 = time = 0
helpertype = Normal
pos	= 0,0
postype	= p1
facing = 1
stateno	= 2000 ; Stateno 2000 is STRAIGHT BALL
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

[State 100, Explod]
type = Explod; 
trigger1 = time = 0;
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; 
pos = 0,0;
postype = p1; 
facing = 1
vel = 0,0 ;
sprpriority	= 4
scale = 4

[State 200: Hop off screen]
type = ScreenBound
trigger1 = (P2MoveType = H) || (BackEdgeBodyDist < -1)
value = 0
movecamera = 0,0

[State 200, 5: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = (IfElse(BackEdgeBodyDist > -5,0,100))
ctrl = 1

;KameHameHa ; Charging Up ; Ball Release [Fireball Version] ; Firing UP!
[Statedef 6002]
type = S
movetype = A
physics = S
anim = 512
;velset	= 0,0
ctrl = 0
poweradd = -1500
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

;BALL itself
[State 1850: Helper]
type = Helper
trigger1 = time = 0
helpertype = Normal
pos	= 0,0
postype	= p1
facing = 1
stateno	= 2001 ; Stateno 2001 is UP BALL
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

[State 100, Explod]
type = Explod; 
trigger1 = time = 0;
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; 
pos = 0,0;
postype = p1; 
facing = 1
vel = 0,0 ;
sprpriority	= 4
scale = 4

[State 200: Hop off screen]
type = ScreenBound
trigger1 = (P2MoveType = H) || (BackEdgeBodyDist < -1)
value = 0
movecamera = 0,0

[State 200, 5: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = (IfElse(BackEdgeBodyDist > -5,0,100))
ctrl = 1

;White Force effect
[Statedef 196]
type = S
movetype = I
physics	= N
anim = 196
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist	= 0
hitcountpersist	= 0
sprpriority	= 999999999999

[State 196: AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2 = Invisible

[State 196:	AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 10
flag = NoFG

[State 196: BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos	= 0,0; -4,-51

[State 196: AAA] 
type = NotHitBy 
trigger1 = 1 
value = SCA 

[State 196:	VarSet]
type = VarSet
trigger1 = (Time = 0)
var(0) = 35

[State 196: VarSet]
type = VarSet
trigger1 = (Var(0) = 35)
var(1)= 0

[State 196: VarSet]
type = VarSet
trigger1 = (Var(0) = 150)
var(1)= 1

[State 196:	VarAdd]
type = VarAdd
trigger1 = 1
var(0)= IfElse(Var(1) = 0,5,-5)

[State 196: AfterImage]
type = AfterImage
trigger1 = 1
time = 5
framegap = 1
length = 2
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = var(0), var(0), var(0)
trans = add

[State 196: DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;Kamehameha Fireball - Firing STRAIGHT 
[Statedef 2000]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 7009

[State 0, ]
type = VelAdd
trigger1 = time >= 0
x = 3

[State 200:	HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAFDP
guardflag = M
animtype = Hard
air.animtype = Back
priority = 5, Hit
damage = 150,75
pausetime = 10,12
guard.pausetime	= 10,12
sparkno = -1
guard.sparkno = -1
sparkxy	= 0,-50
hitsound = S1,11
guardsound = S1,11
yaccel = 0.45
ground.type		= Trip
air.type		= Trip
ground.slidetime	= 40
ground.hittime	= 40
air.hittime		= 15
ground.velocity	= -20,-15
guard.velocity	= -8
air.velocity	= -20,-15
airguard.velocity	= -20,-15
ground.cornerpush.veloff = 0
fall.recover	= 0
air.fall		= 1
getpower = 0
givepower = 0

;Explosion Effect
[State 100, Explod]
type = Explod
trigger1 = movecontact = 1; whenever it should trigger
anim = 7010; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
; ID ; Not needed~
pos = -20,0; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1
scale = 2

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = movecontact = 1

;Kamehameha Fireball - Firing UP 
[Statedef 2001]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 7018

[State 0, ]
type = VelAdd
trigger1 = time >= 0
x = 10
y = -6.66666

[State 200:	HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAFDP
guardflag = M
animtype = Hard
air.animtype = Back
priority = 5, Hit
damage = 150,75
pausetime = 10,12
guard.pausetime	= 10,12
sparkno = -1
guard.sparkno = -1
sparkxy	= 0,-50
hitsound = S1,11
guardsound = S1,11
yaccel = 0.45
ground.type		= Trip
air.type		= Trip
ground.slidetime	= 40
ground.hittime	= 40
air.hittime		= 15
ground.velocity	= -20,-15
guard.velocity	= -8
air.velocity	= -20,-15
airguard.velocity	= -20,-15
ground.cornerpush.veloff = 0
fall.recover	= 0
air.fall		= 1
getpower = 0
givepower = 0

;Explosion Effect
[State 100, Explod]
type = Explod
trigger1 = movecontact = 1; whenever it should trigger
anim = 7010; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
; ID ; Not needed~
pos = -20,0; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1
scale = 2

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = movecontact = 1

;FAST Fireball : HARD hit
[Statedef 1321]
type = S
movetype = A
physics =S
velset = 0,0,0
juggle = 4
ctrl = 0
anim = 2778
poweradd = -100

;Blast Wave Effect
[State 4002, balls]
Type = null
trigger1 = AnimElem = 2
Anim = 2781
pos = 0,0
postype = p1
removetime = 11
ownpal = 1
supermovetime = -1
ontop = 1

[State 5235, 1]
type= PlaySnd
trigger1 = AnimElem = 2
value= S2, 19

[State 1850: Helper]
type = Helper
trigger1 = animelem = 2
helpertype = Normal
pos	= 0,0
postype	= p1
facing = 1
stateno	= 1335
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

[State 5235, 3]
type =  ChangeState
trigger1 = Time = 15
trigger1 = Pos Y < 0
value = 1500

[State 5235, 4]
type =  ChangeState
trigger1 = AnimTime = 0
value =  0
ctrl= 1

;Fireball ; ROUND BALL ; Hard HIT!
[Statedef 1335]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 2783

[State 0, ]
type = VelAdd
trigger1 = time >= 0
x = 5

[State 11251, HitDef]
type = HitDef
trigger1 = time >= 0
attr = S,SA
hitflag = MAF
guardflag = MA 
animtype = Light
priority = 99999999,Hit
hitsound = S2, 6
guardsound = S2, 6
sparkno = S7012
guard.sparkno = S7012
scale = 2
sparkxy = 19,-55
damage = 10,5
pausetime = 0,10
ground.type = Trip
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -20,-10
airguard.velocity = -3.5,-2.75
air.type = Low
air.velocity = -20,-8
guard.velocity = -20
fall = 1
fall.recover = 1
envshake.time = 20
envshake.freq = 100
envshake.ampl = 10

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = movecontact = 1

; Dashing Only Round Kick
[Statedef 252]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 252                     ; Change animation (Def: no change)
poweradd = -100              ; Power to add (Def: 0)

[State 100: AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 30
timegap	= 1
framegap = 2
length = 8
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 3
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 5

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 80, 30
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7013
sparkxy = -10,-40
hitsound   = S0, 7
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Dashing Only Round Kick [Hard] [Button Only]
[Statedef 253]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 252                     ; Change animation (Def: no change)
poweradd = -100              ; Power to add (Def: 0)

[State 100: AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 30
timegap	= 1
framegap = 2
length = 8
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 7

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 7

[State 610, 4]
type = Velset
trigger1 = AnimElem = 3
x = 7

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 7

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 7

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 100, 40
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7014
sparkxy = -10,-40
hitsound   = S0, 7
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 11
ground.velocity = -4.5,-4.5
guard.velocity = -3.5
air.velocity = -4.5,-4.5
airguard.velocity = -3.5,-2
ground.cornerpush.veloff = 0 ; No need
air.cornerpush.veloff = 0 ; No need
down.cornerpush.veloff = 0 ; No need
guard.cornerpush.veloff = 0 ; No need
airguard.cornerpush.veloff = 0 ; No need
fall = 1
fall.recover = 1
fall.recovertime = 0 ;Recover brings more fun + Goku style fighting [YES!]

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Dashing Only Elbow Smash
[Statedef 261]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 260                    ; Change animation (Def: no change)
poweradd = -100              ; Power to add (Def: 0)

[State 100: AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 30
timegap	= 1
framegap = 2
length = 8
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 3
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 8

[State 610, 4]
type = Velset
trigger1 = AnimElem = 6
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 7
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 8
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 9
x = 3

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 80, 30
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7013
sparkxy = -10,-40
hitsound   = S0, 7
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Dashing Only Elbow Bash [Hard] [Button Only]
[Statedef 262]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 260                     ; Change animation (Def: no change)
poweradd = -100              ; Power to add (Def: 0)

[State 100: AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 30
timegap	= 1
framegap = 2
length = 8
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 610, 4]
type = Velset
trigger1 = AnimElem = 1
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 2
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 3
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 610, 4]
type = Velset
trigger1 = AnimElem = 5
x = 12

[State 610, 4]
type = Velset
trigger1 = AnimElem = 6
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 7
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 8
x = 2

[State 610, 4]
type = Velset
trigger1 = AnimElem = 9
x = 3

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 100, 40
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7014
sparkxy = -10,-40
hitsound   = S0, 7
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 11
ground.velocity = -4.5,-4.5
guard.velocity = -3.5
air.velocity = -4.5,-4.5
airguard.velocity = -3.5,-2
ground.cornerpush.veloff = 0 ; No need
air.cornerpush.veloff = 0 ; No need
down.cornerpush.veloff = 0 ; No need
guard.cornerpush.veloff = 0 ; No need
airguard.cornerpush.veloff = 0 ; No need
fall = 1
fall.recover = 1
fall.recovertime = 0 ;Recover brings more fun + Goku style fighting [YES!]

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;KameHameHa ; Charging Up ; Beam This time ; State to 7000 - Anim same
[Statedef 7000]
type = S
movetype = A
physics = S
anim = 510
;velset	= 0,0
ctrl = 0
poweradd = 0
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

;Reset VAR
[State 200 : Var reset]
type = varset
trigger1 = time = 0
v = 0
value = 0

;Kamehameha 
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 40
value = S4, 0
channel = 1

;EEEWWWW 
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 30
value = S1, 13
channel = 2

;EEEWWWW zzzZZZ
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 60
value = S1, 15
channel = 3
loop = 1

;EEEWWWW ZZZzzz
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 75
value = S1, 16
channel = 4
loop = 1

;Aura Sound
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 2
value = S2, 5
channel = 5
loop = 1

;EEEWWWW
[State 1850: Playsnd]
type = Playsnd
trigger1 = time = 75
value = S1, 16
channel = 4
loop = 1

[State 1850: Helper]
type = Helper
trigger1 = time = 40
helpertype = Normal
pos	= 97,121
postype	= p1
facing = 1
stateno	= 196
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

;Aura Effect
[State 730, Aura]
type = Explod
trigger1 = animelem = 2
anim = 731
ID = 731
sprpriority = 3
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1

;Aura Gather
[State 100, Explod]
type = Explod
trigger1 = time = 30; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Ball of Energy
[State 100, Explod]
type = Explod
trigger1 = time = 80; whenever it should trigger
anim = 7017; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 2
sprpriority = 2
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1
pos = 0,0

[State 200: EnvShake]
type = EnvShake
trigger1 = (AnimElem = 2, > 0) && ((GameTime%10) = 0)
time = 10
freq = 80
ampl = -4
phase = 90

;--- Level 2 Settings Power up ----
[State 200: varset]
type = varset
triggerall = time = 150
trigger1 = command = "c"
v = 0
value = 1

;Aura Gather
[State 100, Explod]
type = Explod
triggerall = var(0) = 1; whenever it should trigger
trigger1 = time = 30
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;--- Level 3 Settings Power up ----

[State 200: varset]
type = varset
triggerall = var(0) = 1
trigger1 = command = "c"
v = 0
value = 2

;Aura Gather
[State 100, Explod]
type = Explod
triggerall = var(0) = 2; whenever it should trigger
trigger1 = time = 30
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;----L evel 4 Settings Power up ----

[State 200: varset]
type = varset
triggerall = var(0) = 2
trigger1 = command = "c"
v = 0
value = 3

;Aura Gather
[State 100, Explod]
type = Explod
triggerall = var(0) = 3; whenever it should trigger
trigger1 = time = 30; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

[State 200, 7]
type = ChangeState
triggerall = (AnimElem = 2, > 160)
trigger1 = command = "z"
value = IfElse(Command = "holdup",7002,7001)

;KameHameHa ; Charging Up ; Beam Release [Beam Version]
[Statedef 7001]
type = S
movetype = A
physics = S
anim = 511
;velset	= 0,0
ctrl = 0
poweradd = -1500
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

[state 1850: EEOOOOWWW]
type = playsnd
trigger1 = time = 0
value = S2, 26
channel = 7

;Beam itself Level 1
[State 1850: Helper]
type = Helper
triggerall = var(0) = 0
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4000 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

;Beam itself Level 2
[State 1850: Helper]
type = Helper
triggerall = var(0) = 1
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4001 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 1.2
supermovetime = 200
pausemovetime = 200

;Beam itself Level 3
[State 1850: Helper]
type = Helper
triggerall = var(0) = 2
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4002 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 1.5
supermovetime = 200
pausemovetime = 200

;Beam itself Level 4
[State 1850: Helper]
type = Helper
triggerall = var(0) = 3
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4003 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 2
supermovetime = 200
pausemovetime = 200

[State 100, Explod]
type = Explod; 
trigger1 = time = 0;
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; 
pos = 0,0;
postype = p1; 
facing = 1
vel = 0,0 ;
sprpriority	= 4
scale = 4

[State 200, 5: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = (IfElse(BackEdgeBodyDist > -5,0,100))
ctrl = 1

;KameHameHa ; Charging Up ; Beam Release [Beam Version] ; Firing UP!
[Statedef 7002]
type = S
movetype = A
physics = S
anim = 512
;velset	= 0,0
ctrl = 0
poweradd = -1500
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

[state 1850: EEOOOOWWW]
type = playsnd
trigger1 = time = 0
value = S2, 26
channel = 7

;Beam itself Level 1
[State 1850: Helper]
type = Helper
triggerall = var(0) = 0
trigger1 = time = 0
helpertype = Normal
pos	= 26,-68
postype	= p1
facing = 1
stateno	= 4010 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

;Beam itself Level 2
[State 1850: Helper]
type = Helper
triggerall = var(0) = 1
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4011 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 1.5
supermovetime = 200
pausemovetime = 200

;Beam itself Level 3
[State 1850: Helper]
type = Helper
triggerall = var(0) = 2
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4012 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 1.8
supermovetime = 200
pausemovetime = 200

;Beam itself Level 4
[State 1850: Helper]
type = Helper
triggerall = var(0) = 3
trigger1 = time = 0
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4013 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 2
supermovetime = 200
pausemovetime = 200


[State 100, Explod]
type = Explod; 
trigger1 = time = 0;
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; 
pos = 0,0;
postype = p1; 
facing = 1
vel = 0,0 ;
sprpriority	= 4
scale = 4

[State 200, 5: ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = (IfElse(BackEdgeBodyDist > -5,0,100))
ctrl = 1

;Kamehameha Beam - Firing STRAIGHT 
[Statedef 4000]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 7020

[State 200:	HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAFDP
guardflag = M
animtype = Hard
air.animtype = Back
priority = 5, Hit
damage = 225,120
pausetime = 10,12
guard.pausetime	= 10,12
sparkno = S7006
guard.sparkno = S7006
sparkxy	= 0,0
hitsound = S1,11
guardsound = S1,11
yaccel = 0.45
ground.type	= Trip
air.type = Trip
ground.slidetime = 40
ground.hittime = 100
air.hittime = 15
ground.velocity	= -20,0
guard.velocity = -8
air.velocity = -20,0
airguard.velocity = -20,0
ground.cornerpush.veloff = 0
fall.recover = 0
air.fall = 1
getpower = 0
givepower = 0
envshake.time = 45
envshake.freq = 100
envshake.ampl = 10

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Kamehameha Beam - Firing UP! Level 1
[Statedef 4010]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 7019

[State 200:	HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAFDP
guardflag = M
animtype = Hard
air.animtype = Back
priority = 5, Hit
damage = 225,120
pausetime = 10,12
guard.pausetime	= 10,12
sparkno = -1
guard.sparkno = -1
sparkxy	= 0,-50
hitsound = S1,11
guardsound = S1,11
yaccel = 0.45
ground.type		= Trip
air.type		= Trip
ground.slidetime	= 40
ground.hittime	= 40
air.hittime		= 15
ground.velocity	= -20,-15
guard.velocity	= -8
air.velocity	= -20,-15
airguard.velocity	= -20,-15
ground.cornerpush.veloff = 0
fall.recover	= 0
air.fall		= 1
getpower = 0
givepower = 0

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;KameHameHa ; Charging Up ; Beam This time ; State to 7010 - Anim same : Kaioken Style
[Statedef 7010]
type = S
movetype = A
physics = S
anim = 7021
;velset	= 0,0
ctrl = 0
poweradd = -3000
juggle = 5
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

;;Wind/Force Effect
;[State 3000: Helper]
;type = null
;trigger1 = time = 20
;helpertype = Normal
;pos	= 0,0
;postype	= p1
;facing = 1
;stateno	= 9840
;keyctrl	= 0
;ownpal = 1
;supermovetime = 100
;pausemovetime = 100

;Kaioken
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = S2, 29
channel = 1

;Aura Sound
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = S2, 15
channel = 2
loop = 1

;Beam Sound
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 3
value = S2, 17
channel = 3
volume = -15

;Walaaa~~
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 3
value = S2, 25
channel = 4
volume = 255

;Energy
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 2
value = S1, 13
channel = 5

;force
[State 1850: Helper]
type = Helper
trigger1 = animelem = 2
helpertype = Normal
pos	= 0,0
postype	= p1
facing = 1
stateno	= 197
keyctrl	= 0
ownpal = 1
supermovetime = 200
pausemovetime = 200

;Aura Effect
[State 730, Aura]
type = Explod
trigger1 = animelem = 1
anim = 7200
ID = 7200
sprpriority = 3
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1

;Aura Gather
[State 100, Explod]
type = Explod
trigger1 = animelem = 2; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -13,-42; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Ball of Energy
[State 100, Explod]
type = Explod
trigger1 = animelem = 2; whenever it should trigger
anim = 7017; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 2
sprpriority = 2
bindtime = 0
removetime = 200
ownpal = 1
ontop = 1
removeongethit = 1
pos = 0,0

[State 200: EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 10
freq = 80
ampl = -4
phase = 90

;Beam itself 
[State 1850: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
pos	= 26,-49
postype	= p1
facing = 1
stateno	= 4008 ; Stateno 4000 is STRAIGHT BEAM
keyctrl	= 0
ownpal = 1
scale = 2
supermovetime = 200
pausemovetime = 200

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;White Force effect ; Reversed
[Statedef 197]
type = S
movetype = I
physics	= N
anim = 6318
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist	= 0
hitcountpersist	= 0
sprpriority	= 999999999999

[State 196: AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2 = Invisible

[State 196:	AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 10
flag = NoFG

[State 196: BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos	= 0,0; -4,-51

[State 196: AAA] 
type = NotHitBy 
trigger1 = 1 
value = SCA 

[State 196:	VarSet]
type = VarSet
trigger1 = (Time = 0)
var(0) = 35

[State 196: VarSet]
type = VarSet
trigger1 = (Var(0) = 35)
var(1)= 0

[State 196: VarSet]
type = VarSet
trigger1 = (Var(0) = 150)
var(1)= 1

[State 196:	VarAdd]
type = VarAdd
trigger1 = 1
var(0)= IfElse(Var(1) = 0,5,-5)

[State 196: AfterImage]
type = AfterImage
trigger1 = 1
time = 5
framegap = 1
length = 2
paladd = 0, 0, 0
palmul = .50, .50, .50
palcontrast = var(0), var(0), var(0)
trans = add

[State 196: DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;Charge Blow Back
[Statedef 9840]
type = S
movetype = I
physics = N
anim = 9840
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 0
hitdefpersist = 0
movehitpersist = 0
hitcountpersist	= 0
sprpriority	= 2

[State 9840: NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9840: PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 9840: VelSet]
type = VelSet
trigger1 = Time = 0
x = 10

[State 9840: DestroySelf]
type = DestroySelf
trigger1 = Time = 40

;Kamehameha Beam - Firing STRAIGHT 
[Statedef 4008]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 2
juggle = 6
ctrl = 0
anim = 7020
scale = 2

[State 200:	HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAFDP
guardflag = M
animtype = Hard
air.animtype = Back
priority = 5, Hit
damage = 300,150
pausetime = 10,12
guard.pausetime	= 10,12
sparkno = S7006
guard.sparkno = S7006
sparkxy	= 0,0
hitsound = S1,11
guardsound = S1,11
yaccel = 0.45
ground.type	= Trip
air.type = Trip
ground.slidetime = 40
ground.hittime = 100
air.hittime = 15
ground.velocity	= -20,0
guard.velocity = -8
air.velocity = -20,0
airguard.velocity = -20,0
ground.cornerpush.veloff = 0
fall.recover = 0
air.fall = 1
getpower = 0
givepower = 0
envshake.time = 45
envshake.freq = 100
envshake.ampl = 10

[State 1013, afti]
type = AfterImage
trigger1 = time = 0
time = 50
length = 14
;palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,256,256
;palpostbright = 0,0,0
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add
;ignorehitpause = 0
;persistent = 1

[State 1850, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

; Kaioken Combo
[Statedef 2500]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 2568                     ; Change animation (Def: no change)
poweradd = -2800           ; Power to add (Def: 0)

;Walaa~~~~~!
[State 1850: Playsnd]
type = Playsnd
trigger1 = animelem = 2
value = S2, 25
channel = 1

;Dust Left
[State 100, Explod]
type = Explod
trigger1 = animelem = 2; whenever it should trigger
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = 0,0; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Dust Right
[State 100, Explod]
type = Explod
trigger1 = animelem = 2; whenever it should trigger
anim = 7011; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = 0,0; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Aura Effect 
[State 730, Aura]
type = Explod
trigger1 = animelem = 2
anim = 7200
ID = 7200
sprpriority = 3
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
removeongethit = 1

;Aura Gather left
[State 100, Explod]
type = Explod
trigger1 = animelem = 4; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = -22,-45; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

;Aura Gather right 
[State 100, Explod]
type = Explod
trigger1 = animelem = 4; whenever it should trigger
anim = 7007; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff)
ID = 1; ID ; Not needed~
pos = 23,-49; where it should be relative to the postype
;postype = p1; the pos Type
sprpriority	= 3 ; High above
removetime = -2
removeongethit = 1

[State 200: EnvShake]
type = EnvShake
trigger1 = (AnimElem = 2, > 0) && ((GameTime%10) = 0)
time = 10
freq = 80
ampl = -4
phase = 90

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 2501
ctrl = 0

; RUN_FWD from Kaioken
[Statedef 2501]
type    = S
physics = S
anim = 2569
sprpriority = 1

;Removing Kaioken Flame
[State 100, RemoveAura]
type = RemoveExplod
trigger1 = time = 1
ID = 7200

[State 100, Explod]
type = Explod; special effect..like a blast from his hand or something
trigger1 = time = 0; whenever it should trigger
anim = 7000; The animation it should play (if you put an 'F' in front of the number it plays from the fighfx.sff...the common file)
ID = 0; just an ID
pos = 0,0; where it should be relative to the postype
postype = p1; 
facing = 1
vel = 0,0 ; not moving
sprpriority	= 3

[State 610, 4]
type = Veladd
trigger1 = AnimElem = 1
x = 8

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 2502
ctrl = 0

;Quick Teleport from Kiaoken
[Statedef 2502]
type    = S
movetype= A
physics = S
poweradd= 0
juggle  = 4
ctrl = 0
velset = 0,0
anim = 2054

[State 4100, 0]
type = PlaySnd
trigger1 = Time = 0
value = S2, 27

[State 4100, 1]
type = PosAdd
trigger1 = Time = 4
x = P2Dist X-30

[State 4100, 5]
type = turn
trigger1 = P2Dist X < 0
trigger1 = Time = 4

[State 1410, 5]
type = ChangeState
trigger1 = Time = 8
value = 2503
ctrl = 0

; Kaioken Attack
[Statedef 2503]
type    = S                       ; State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                  ; Move-type: A-attack, I-idle, H-gethit
physics = S                    ; Physics: S-stand, C-crouch, A-air
juggle  = 1                      ; Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                    ; Set velocity (x,y) (Def: no change)
ctrl = 0                            ; Set ctrl (Def: no change)
anim = 2570                     ; Change animation (Def: no change)
poweradd = 0             ; Power to add (Def: 0)

[State 210, 2]
type = SuperPause
trigger1 = animelem = 1
time = 16
anim = S7008
pos = 30, -56 
movetime = 0
darken = 0
poweradd = 0
unhittable = 0

[State 210, 2]
type = SuperPause
trigger1 = animelem = 5
time = 16
anim = S7008
pos = 15, -41
movetime = 0
darken = 0
poweradd = 0
unhittable = 0

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 100, 30
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7014
sparkxy = -10,-70
hitsound   = S0, 7
guardsound = S3, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.2,-3.2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Medium
damage    = 50, 25
guardflag = MA
pausetime = 11,11
sparkno = S7006
guard.sparkno = S7014
sparkxy = -10,-70
hitsound   = S1, 3
guardsound = S3, 0
ground.type = High
ground.slidetime = 9
ground.hittime = 11
ground.velocity = -8.5,-7.5
guard.velocity = -6
air.velocity = -8.5,-7.5
airguard.velocity = -7.5,-2

[State 1410, 5]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1


; Overrided Common States (Found in data/common1.cns)
; Use the same number to override.
; ---------------------------------------------------------------------------




; States that are always checked and executed
; Use [Statedef -2]
;---------------------------------------------------------------------------




; States that are executed when in self's state file
; Use [Statedef -3]
;---------------------------------------------------------------------------





